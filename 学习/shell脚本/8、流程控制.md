# 流程控制

和Java、PHP等语言不一样，sh的流程控制不可为空，如(以下为PHP流程控制写法)：

实例

```php
<?php
if (isset($_GET["q"])) {
  search(q);
}
else {
  *// 不做任何事情*
}
```

在sh/bash里可不能这么写，如果else分支没有语句执行，就不要写这个else。

## 一、if else

### 1、fi

if 语句语法格式：

```shell
if condition
then
	command1
	command2
	...
	commandN
fi
```

写成一行（适用于终端命令提示符）：

```shell
if [ $(ps -ef | grep -c "ssh") -gt 1 ]; then echo "true"; fi
```

末尾的if需要倒过来写，后面还会遇到类似的。

### 2、if else

If else 语法格式：

```shell
if condition
then
	command1
	command2
	...
	commandN
else
	command
fi
```

### 3、if else-if else

if else-if else 语法格式：

```shell
if condition1
then
    command1
elif condition2 
then 
    command2
else
    commandN
fi
```

以下实例判断两个变量是否相等：

```shell
#!/bin/sh
a=10
b=10

if [$a == $b]
then
	echo "a 等于 b"
elif [$a -gt $b]
then
	echo "a 大于 b"
elif [$a -lt $b]
	echo "a 小于b "
else
	echo "没有符合的条件"
fi
```

输出结果为：

```shell
a 小于 b
```



if else 命令经常与 test 命令结合使用，如下所示：

```shell
num1=$[2*3]
num2=$[1+5]
if test $[num1] -eq $[num2]
then
	echo "两个数字相等！"
else
	echo "两个数字不相等！"
fi
```

输出结果为：

```shell
两个数字不相等！
```

## 二、for循环

for 循环格式：

```shell
for var in item1 item2 ... itemN
do 
	command1
	command2
	...
	commandN
done
```

写成一行：

```shell
for var in item1 item2 ...itemN; do command1; command2...; done
```

当变量值在后面的列表里时，for循环即执行一遍后面的所有命令，使用变量名获取列表中的当前取值。命令可以为任何有效的shell命令和语句。in后面的列表可以包含替换、字符串和文件名。

==in列表是可选的，如果不用他，for循环使用命令行的位置参数。==

例如，顺序输出当前列表中的数字：

```shell
for loop in 1 2 3 4 5
do
	echo "The value is: $loop"
done
```

输出结果为：

```shell
The value is: 1
The value is: 2
The value is: 3
The value is: 4
The value is: 5
```

顺序输出字符串：

```shell
for str in 'This is a string'
do
	echo $str
done
```

输出结果为：

```shell
This is a string
```

## 三、while 语句

while循环用于不断执行一系列命令，也用于从输入文件中读取数据；命令通常为测试条件。格式为：

```shell
while condition
do
	command
done
```

以下是一个基础的while循环，测试条件是：如果int小于5，那么返回真。int从0开始，每次循环处理时，int加1。运行脚本，返回数字1到5，然后终止。

```shell
#!/bin/sh

int=1
while(( $int <=5 ))
do
	echo $int
	let "int++" # let命令用于执行一个或多个表达式，变量计算时不用加$
done
```

输出结果为：

```shell
1
2
3
4
5
```



while循环可用于读取键盘信息。下面的脚本中，输入信息被设置为变量FILM，按<CTRL-D>结束循环。

==这是一个死循环，所以需要使用<CTRL-D>来退出，定义时不用定义变量==

```shell
echo '按下<CTRL-D>退出'
echo -n '输入你最喜欢的网站名：'
while read FILM
do
	echo "是的！$FILM 是一个好网站"
done
```

### 无限循环

无限循环语法格式：

```shell
while :
do
	command
done
```

或者：

```shell
while true
do
	command
done
```

或者：

```shell
for (( ; ; ))
```

## 四、until循环

until 循环执行一系列命令直至条件为 true 时停止。

until 循环与 while 循环在处理方式上刚好相反。

一般 while 循环优于 until 循环，但在某些时候—也只是极少数情况下，until 循环更加有用。

until 语法格式:

```shell
until condition
do
	command
done
```

condition 一般为条件表达式，如果返回值为 false，则继续执行循环体内的语句，否则跳出循环。

以下实例我们使用 until 命令来输出 0 ~ 9 的数字：

```shell
#!/bin/bash

a=0

until [ ! $a -lt 10 ]
do
   echo $a
   a=`expr $a + 1`
done
```

输出结果为：

```shell
0
1
2
3
4
5
6
7
8
9
```

## 五、case

## 六、跳出循环

## 七、case...esac

